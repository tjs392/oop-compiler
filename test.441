class A [
    fields x
    method m() with locals:
      return &this.x
    
    method check() with locals:
      if &this.x: {
        return 1
      } else {
        return 0
      }
    
    method earlyReturn() with locals:
      ifonly &this.x: {
        return 99
      }
      return 0
]

class B [
    fields y, z
    method m() with locals:
      if &this.y: {
        return &this.y
      } else {
        return &this.z
      }
    
    method compare() with locals:
      if &this.y: {
        if &this.z: {
          return 3
        } else {
          return 2
        }
      } else {
        return 1
      }
    
    method addBonus() with locals:
      ifonly &this.y: {
        !this.z = (&this.z + 100)
      }
      return &this.z
]

main with x, y, temp:
x = @A
y = @B

!x.x = 10
print(^x.check())

!x.x = 0
print(^x.check())

!y.y = 5
!y.z = 99
print(^y.m())

!y.y = 0
print(^y.m())

!y.y = 1
!y.z = 1
print(^y.compare())

!y.y = 1
!y.z = 0
print(^y.compare())

!y.y = 0
!y.z = 999
print(^y.compare())

print(888)

!x.x = 5
print(^x.earlyReturn())

!x.x = 0
print(^x.earlyReturn())

!y.y = 1
!y.z = 10
print(^y.addBonus())

!y.y = 0
!y.z = 10
print(^y.addBonus())

temp = 0
ifonly x: {
  temp = 1
}
print(temp)